---
- hosts: all
  become: True

  tasks:
  - name: remove epel-release and yum-utils
    yum:
      name: "{{ item }}"
      state: absent
    loop:
      - epel-release
      - yum-utils
      - git
      - python
      - python-pip

  - name: remove docker
    dnf:
      name: "{{ item }}"
      state: absent
    loop:
      - docker-ce
      - docker-ce-cli
      - containerd.io
      - docker-compose
  
  - name: delete image
    ansible.builtin.shell:  docker rmi flask_app:latest

  - name: stop running continer
    ansible.builtin.shell: docker stop web

  - name: delete continer
    ansible.builtin.shell: docker rm web
